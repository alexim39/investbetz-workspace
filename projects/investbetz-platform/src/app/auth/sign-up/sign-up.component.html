<!-- Sign-Up Form Template -->
<form [formGroup]="signUpForm" (ngSubmit)="onSubmit(signUpForm.value)" autocomplete="off">
    <!-- Last Name Input -->
    <div class="row">
      <div class="input-field col s12">
        <input
          id="lastname"
          type="text"
          formControlName="lastName"
          class="validate"
          aria-describedby="lastNameHelp"
          aria-required="true"
        />
        <label for="lastname">Enter your last name</label>
        <small id="lastNameHelp" class="helper-text invalid" *ngIf="signUpForm.get('lastName')?.invalid && signUpForm.get('lastName')?.touched">
          <ng-container *ngIf="signUpForm.get('lastName')?.errors?.['required']">
            Your last name is required.
          </ng-container>
        </small>
      </div>
    </div>
  
    <!-- First Name Input -->
    <div class="row">
      <div class="input-field col s12">
        <input
          id="firstname"
          type="text"
          formControlName="firstName"
          class="validate"
          aria-describedby="firstNameHelp"
          aria-required="true"
        />
        <label for="firstname">Enter your first name</label>
        <small id="firstNameHelp" class="helper-text invalid" *ngIf="signUpForm.get('firstName')?.invalid && signUpForm.get('firstName')?.touched">
          <ng-container *ngIf="signUpForm.get('firstName')?.errors?.['required']">
            Your first name is required.
          </ng-container>
        </small>
      </div>
    </div>
  
    <!-- Email Input -->
    <div class="row">
      <div class="input-field col s12">
        <input
          id="email"
          type="email"
          formControlName="email"
          class="validate"
          aria-describedby="emailHelp"
          aria-required="true"
        />
        <label for="email">Enter your email</label>
        <small id="emailHelp" class="helper-text invalid" *ngIf="signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched">
          <ng-container *ngIf="signUpForm.get('email')?.errors?.['required']">
            Your email is required.
          </ng-container>
          <ng-container *ngIf="signUpForm.get('email')?.errors?.['email']">
            Invalid email format.
          </ng-container>
        </small>
      </div>
    </div>
  
    <!-- Password Input -->
    <div class="row">
      <div class="input-field col s12">
        <input
          id="psswd"
          type="password"
          formControlName="psswd"
          class="validate"
          appAppPasswordToggle
          aria-describedby="passwordHelp"
          aria-required="true"
        />
        <label for="psswd">Enter your password</label>
        <small id="passwordHelp" class="helper-text p-hint">
          Password must be a minimum of 6 characters with at least a number.
        </small>
        <small class="helper-text invalid" *ngIf="signUpForm.get('psswd')?.invalid && signUpForm.get('psswd')?.touched">
          <ng-container *ngIf="signUpForm.get('psswd')?.errors?.['required']">
            Your password is required.
          </ng-container>
          <ng-container *ngIf="signUpForm.get('psswd')?.errors?.['minlength']">
            Password must be at least 6 characters.
          </ng-container>
        </small>
      </div>
    </div>
  
    <!-- Terms and Conditions Checkbox -->
    <div class="row">
      <div class="col s12">
        <p style="margin-left: 1em;">
          <label>
            <input type="checkbox" formControlName="checkTerms" />
            <span>
              <small>
                I have read and agree to Investbetz 
                <a [routerLink]="['']">user policies, </a>
                <a [routerLink]="['']">terms and conditions</a>
              </small>
            </span>
          </label>
          <small class="helper-text invalid" *ngIf="signUpForm.get('checkTerms')?.invalid && signUpForm.get('checkTerms')?.touched">
            <ng-container *ngIf="signUpForm.get('checkTerms')?.errors?.['requiredTrue']">
              You must accept the terms and conditions.
            </ng-container>
          </small>
        </p>
      </div>
    </div>
  
    <!-- Feedback Messages -->
    <div class="row">
      <div *ngIf="errorMessage" class="invalid" [@fadeInOut]>
        <span>{{ errorMessage }}</span>
      </div>
      <div *ngIf="successMessage" class="valid" [@fadeInOut]>
        <span>{{ successMessage }}</span>
      </div>
    </div>

    <div class="row" *ngIf="isLoading">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div>
  
    <!-- Submit Button -->
    <div class="row">
      <button
        type="submit"
        class="col s12 btn btn-large waves-effect waves-red"
        [disabled]="!signUpForm.valid || isLoading || isSignedUp">
        Submit
      </button>
    </div>
  </form>
  