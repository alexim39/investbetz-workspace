<ul id="sidenav-1" class="sidenav sidenav-fixed z-depth-5 grey lighten-3">

  <li title="{{ user?.signUpEmail | lowercase }}">
    <div class="user-view center-align red lighten-2 z-depth-5">
      <div class="user-view--img">
        <img class="circle" [src]="img">
      </div>
      <div>
        <span class="name truncate black-text">
          {{ user?.lastName | titlecase }} {{ user?.firstName | titlecase }}
        </span>
      </div>
      <div>
        <span class="email">{{ user?.email | lowercase }}</span>
      </div>
    </div>
  </li>

  <async-balance></async-balance>

  <li routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">
    <a [routerLink]="['../dashboard']">
      <i class="material-icons">dashboard</i>Dashboard
    </a>
  </li>

  <!-- Invest Menu with Dynamic Nested Submenu -->
  <li>
    <ul class="collapsible">
      <li style="padding-left: 1em;">
        <div class="collapsible-header investmnt-indicator">
          <i class="material-icons">savings</i>
          <span class="streghtup">Plans</span>
          <i class="material-icons investmnt-closed">chevron_left</i>
          <i class="material-icons investmnt-opened" style="display: none;">expand_more</i>
        </div>
        <div class="collapsible-body">
          <ul class="collection" style="margin-left: -2em;">
            <!-- Loop through each Invest menu item -->
            <li *ngFor="let item of investMenuData" class="collection-item grey lighten-3">
              <!-- Render nested submenu if children exist -->
              <ng-container *ngIf="item.children; else singleLink">
                <ul class="collapsible">
                  <li style="margin-left: 1em;">
                    <div class="collapsible-header nested-header">
                      <span>{{ item.label }}</span>
                      <i class="material-icons nested-collapsible-closed">chevron_left</i>
                      <i class="material-icons nested-collapsible-opened" style="display: none;">expand_more</i>
                    </div>
                    <div class="collapsible-body">
                      <ul class="collection" style="margin-left: -4em;">
                        <li *ngFor="let child of item.children" class="collection-item grey lighten-3">
                          <a class="collection-item-link" 
                             [routerLink]="child.routerLink" 
                             routerLinkActive="nexted-active" 
                             [routerLinkActiveOptions]="{exact:true}">
                            {{ child.label }}
                          </a>
                        </li>
                      </ul>
                    </div>
                  </li>
                </ul>
              </ng-container>
              <!-- Render a single link if there are no children -->
              <ng-template #singleLink>
                <a class="collection-item-link" 
                   [routerLink]="item.routerLink" 
                   routerLinkActive="nexted-active" 
                   [routerLinkActiveOptions]="{exact:true}">
                  {{ item.label }}
                </a>
              </ng-template>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </li>


  <!-- Transactions -->
  <li>
    <ul class="collapsible">
      <li style="padding-left: 1em;">
        <div class="collapsible-header feedback-indicator">
          <i class="material-icons">receipt_long</i>
          <span class="streghtup">Transactions</span>
          <i class="material-icons feedback-closed">chevron_left</i>
          <i class="material-icons feedback-opened" style="display: none;">expand_more</i>
        </div>
        <div class="collapsible-body">
          <ul class="collection" style="margin-left: -2em;">
            <li class="collection-item grey lighten-3">
              <a class="collection-item-link" 
                 [routerLink]="['../dashboard/transactions/deposit']" 
                 routerLinkActive="nexted-active" 
                 [routerLinkActiveOptions]="{exact:true}">
                Deposit Funds
              </a>
            </li>
            <li class="collection-item grey lighten-3">
              <a class="collection-item-link" 
                 [routerLink]="['../dashboard/transactions/withdrawal']" 
                 routerLinkActive="nexted-active" 
                 [routerLinkActiveOptions]="{exact:true}">
                Withdraw Funds
              </a>
            </li>
            <li class="collection-item grey lighten-3">
              <a class="collection-item-link" 
                 [routerLink]="['../dashboard/transactions/history']" 
                 routerLinkActive="nexted-active" 
                 [routerLinkActiveOptions]="{exact:true}">
                Transaction History
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </li>


  <li routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">
    <a [routerLink]="['../dashboard/calculator']">
      <i class="material-icons">calculate</i>Calculator
    </a>
  </li>

  <!-- Settings Menu -->
  <li>
    <ul class="collapsible">
      <li style="padding-left: 1em;">
        <div class="collapsible-header setting-indicator">
          <i class="material-icons">settings</i>
          <span class="streghtup">Settings</span>
          <i class="material-icons setting-closed">chevron_left</i>
          <i class="material-icons setting-opened" style="display: none;">expand_more</i>
        </div>
        <div class="collapsible-body">
          <ul class="collection" style="margin-left: -2em;">
            <li class="collection-item grey lighten-3">
              <a class="collection-item-link" 
                 [routerLink]="['../dashboard/settings/profile']" 
                 routerLinkActive="nexted-active" 
                 [routerLinkActiveOptions]="{exact:true}">
                Profile Settings
              </a>
            </li>
            <li class="collection-item grey lighten-3">
              <a class="collection-item-link" 
                 [routerLink]="['../dashboard/settings/security']" 
                 routerLinkActive="nexted-active" 
                 [routerLinkActiveOptions]="{exact:true}">
                Security Settings
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </li>

  <!-- Feedback/Support Menu -->
  <li>
    <ul class="collapsible">
      <li style="padding-left: 1em;">
        <div class="collapsible-header feedback-indicator">
          <i class="material-icons">help</i>
          <span class="streghtup">Support</span>
          <i class="material-icons feedback-closed">chevron_left</i>
          <i class="material-icons feedback-opened" style="display: none;">expand_more</i>
        </div>
        <div class="collapsible-body">
          <ul class="collection" style="margin-left: -2em;">
            <li class="collection-item grey lighten-3">
              <a class="collection-item-link" 
                 [routerLink]="['../dashboard/support/help']" 
                 routerLinkActive="nexted-active" 
                 [routerLinkActiveOptions]="{exact:true}">
                Help Center
              </a>
            </li>
            <li class="collection-item grey lighten-3">
              <a class="collection-item-link" 
                 [routerLink]="['../dashboard/support/contact']" 
                 routerLinkActive="nexted-active" 
                 [routerLinkActiveOptions]="{exact:true}">
                Contact Support
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </li>

</ul>
